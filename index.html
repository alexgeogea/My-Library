<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<form>
		<input type="text" placeholder="Search for a book"/>
		<input type="button" value="Search" onclick="searchBook()"/>
	</form>
	<form>
		<label for="title">Title</label>
		<input type="text" id="title">

		<label for="tauthor">Author</label>
		<input type="text" id="author">

		<label for="rating">Rating</label>
		<input type="number" id="rating">
		<input type="button" value="Add" onclick="addBook();">
	</form>

	<div id="books-container">
	
	</div>

	<script type="text/javascript">
	var books = [];

	if(typeof(Storage)  !== "undefined") {
		books = JSON.parse(localStorage.getItem('books')) || [ ];
	}

	// Add a new book
	function addBook() {
		var titleInput = document.getElementById('title').value;
		var authorInput = document.getElementById('author').value;
		var ratingInput = document.getElementById('rating').value;
		books.push({ 'title': titleInput, 'author': authorInput, 'rating': ratingInput});
		localStorage.setItem( 'books', JSON.stringify( books ) );
	}

	// Display the books
	var container = document.getElementById('books-container');
	function displayBooks(arr) {
		arr.forEach(function(item) {
			var title = document.createElement('h3');
			title.innerText = item.title;
			container.appendChild(title);
			var author = document.createElement('p');
			author.innerText = item.author;
			container.appendChild(author);
			var rating = document.createElement('p');
			rating.innerText = item.rating;
			container.appendChild(rating);
			var remove = document.createElement('button');
			remove.innerText = "Delete";
			container.appendChild(remove);
		});
	}

	displayBooks(books);

	// Delete a book
	function deleteBook() {
		var deleteBtn = document.querySelector('button');
		deleteBtn.onclick = function(i) {
			books.splice(i, 1) && localStorage.removeItem('books', i);
		}
	}

	// Search for a book
	function searchBook() {
		var input = document.querySelector('input').value.toLowerCase();
		var booksLength = books.length;
		for (var i = 0; i<booksLength; i++ ) {
			if(books[i].title.toLowerCase().indexOf(input) != -1 || books[i].author.toLowerCase().indexOf(input) != -1) {
				document.getElementById('title').innerText = books[i].title;
				document.getElementById('author').innerText = books[i].author;
			}
		}	
	};		
	
	</script>	
</body>
</html>




